<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Fri Mar 22 11:48:07 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SimulationClockControl (Power TAC server modules 1.6.0-SNAPSHOT API)</title>
<meta name="date" content="2019-03-22">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SimulationClockControl (Power TAC server modules 1.6.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":9,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SimulationClockControl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/powertac/server/ServerPropertiesService.html" title="class in org.powertac.server"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/powertac/server/SimulationClockControl.Status.html" title="enum in org.powertac.server"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/powertac/server/SimulationClockControl.html" target="_top">Frames</a></li>
<li><a href="SimulationClockControl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.powertac.server</div>
<h2 title="Class SimulationClockControl" class="title">Class SimulationClockControl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.powertac.server.SimulationClockControl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">SimulationClockControl</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Timer-based clock management for the Power TAC simulator. This is a
 singleton class, but it must be initialized with a reference to the 
 timeService in order to do its job. Therefore, it is an error to 
 attempt to retrieve the instance before initialization.
 <p>
 The basic design for this scheme is given at 
 https://github.com/powertac/powertac-server/wiki/Time-management.
 The goal is to produce a tick by calling timeService.updateTime() 
 every n seconds, where n is 3600/timeService.rate. So if 
 timeService.rate is 360, this would be a tick every 10 seconds.
 Current simulation time is given by the formula
   time = rate * (systemTime - start) + base
 where start, base, and rate are simulation parameters.</p>
 <p>
 We assume that the simulator is a single thread, although it may
 control other threads. That thread waits for the next tick, then
 does some work. Ideally, that work will be completed in fewer than
 n seconds, but occasionally it may take longer. Since the broker 
 needs to keep track of time on its own, it needs to know when this
 happens, and must be informed of the updated start time so that it
 can compute a simulation time that agrees with the server. In
 addition, a broker might want to pause the clock in order to allow
 a user to fill out a dialog or otherwise interact with a user. Given
 an appropriate set of messages, this event could be handled in much
 the same way as a server timeslot overrun.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>John Collins</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.Status.html" title="enum in org.powertac.server">SimulationClockControl.Status</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#checkClockDrift--">checkClockDrift</a></span>()</code>
<div class="block">Compares sim time to sys time, updates start if it's off too much</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#complete--">complete</a></span>()</code>
<div class="block">Indicates that the simulator has completed its work on the current
 timeslot.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../../org/powertac/server/SimulationClockControl.html" title="class in org.powertac.server">SimulationClockControl</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#getInstance--">getInstance</a></span>()</code>
<div class="block">Returns the instance, which of course will be null if the singleton
 is not yet initialized.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#initialize-org.powertac.server.CompetitionControlService-org.powertac.common.TimeService-">initialize</a></span>(<a href="../../../org/powertac/server/CompetitionControlService.html" title="class in org.powertac.server">CompetitionControlService</a>&nbsp;competitionControl,
          <a href="../../../org/powertac/common/TimeService.html" title="class in org.powertac.common">TimeService</a>&nbsp;timeService)</code>
<div class="block">Creates the instance and sets the reference to the timeService.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#releasePause--">releasePause</a></span>()</code>
<div class="block">Releases an externally-requested pause.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#requestPause--">requestPause</a></span>()</code>
<div class="block">Serves an external pause request.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#scheduleTick--">scheduleTick</a></span>()</code>
<div class="block">Schedules the next tick.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#setStart-long-">setStart</a></span>(long&nbsp;start)</code>
<div class="block">Sets the sim clock start time, which in turn gets propagated to the
 timeService.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#stop--">stop</a></span>()</code>
<div class="block">Stops the clock.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#waitForTick-int-">waitForTick</a></span>(int&nbsp;n)</code>
<div class="block">Blocks the caller until the next tick.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/powertac/server/SimulationClockControl.html#waitUntilStop--">waitUntilStop</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize-org.powertac.server.CompetitionControlService-org.powertac.common.TimeService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public static&nbsp;void&nbsp;initialize(<a href="../../../org/powertac/server/CompetitionControlService.html" title="class in org.powertac.server">CompetitionControlService</a>&nbsp;competitionControl,
                              <a href="../../../org/powertac/common/TimeService.html" title="class in org.powertac.common">TimeService</a>&nbsp;timeService)</pre>
<div class="block">Creates the instance and sets the reference to the timeService.</div>
</li>
</ul>
<a name="getInstance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../org/powertac/server/SimulationClockControl.html" title="class in org.powertac.server">SimulationClockControl</a>&nbsp;getInstance()</pre>
<div class="block">Returns the instance, which of course will be null if the singleton
 is not yet initialized.</div>
</li>
</ul>
<a name="setStart-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStart</h4>
<pre>public&nbsp;void&nbsp;setStart(long&nbsp;start)</pre>
<div class="block">Sets the sim clock start time, which in turn gets propagated to the
 timeService.</div>
</li>
</ul>
<a name="scheduleTick--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleTick</h4>
<pre>public&nbsp;void&nbsp;scheduleTick()</pre>
<div class="block">Schedules the next tick. The interval between now and the next tick is
 determined by comparing the current system time with what the time should
 be on the next tick.</div>
</li>
</ul>
<a name="complete--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>complete</h4>
<pre>public&nbsp;void&nbsp;complete()</pre>
<div class="block">Indicates that the simulator has completed its work on the current
 timeslot. If the sim was delayed, then resume it. On the last tick,
 client must call stop() rather than complete().</div>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block">Stops the clock. Call this method when processing on the last tick is
 finished.</div>
</li>
</ul>
<a name="waitUntilStop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitUntilStop</h4>
<pre>public&nbsp;void&nbsp;waitUntilStop()</pre>
</li>
</ul>
<a name="waitForTick-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForTick</h4>
<pre>public&nbsp;void&nbsp;waitForTick(int&nbsp;n)</pre>
<div class="block">Blocks the caller until the next tick.</div>
</li>
</ul>
<a name="checkClockDrift--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkClockDrift</h4>
<pre>public&nbsp;void&nbsp;checkClockDrift()</pre>
<div class="block">Compares sim time to sys time, updates start if it's off too much</div>
</li>
</ul>
<a name="requestPause--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requestPause</h4>
<pre>public&nbsp;void&nbsp;requestPause()</pre>
<div class="block">Serves an external pause request.</div>
</li>
</ul>
<a name="releasePause--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>releasePause</h4>
<pre>public&nbsp;void&nbsp;releasePause()</pre>
<div class="block">Releases an externally-requested pause.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SimulationClockControl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/powertac/server/ServerPropertiesService.html" title="class in org.powertac.server"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/powertac/server/SimulationClockControl.Status.html" title="enum in org.powertac.server"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/powertac/server/SimulationClockControl.html" target="_top">Frames</a></li>
<li><a href="SimulationClockControl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2019 <a href="http://www.powertac.org/">Power TAC</a>. All rights reserved.</small></p>
</body>
</html>
